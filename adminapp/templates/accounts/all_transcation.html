
{% include "layout/header.html" %}
{% include "layout/sidebar.html" %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transaction</title>
    
    {% load static %}
    <div class="container">
    
    
    
    
    
    
    
    <div class="main-header">
    <h1 class="headline"> All Transactions</h1>
    <div class="side-btns">
    
    
    {% comment %} <a class="btn-primary btn" href="{% url "appointmentForm" %}">Appointment Form</a> {% endcomment %}
    
    
    </div>    
    </div>   
    
    <table class="table">
        <thead>
          <tr>

            <th>#</th>
            <th>Date </th>
            <th>Party Name</th>
            <th>Type</th>
            
            <th>Phone Number</th>
            <th>Action</th>
            <th>Received/Paid</th>
            

              
              
           
          </tr>
        </thead>
        <tbody>
          
          {% for transcation in transcation %}
            <tr>
                <td>{{ transcation.id }}</td>
                <td>{{ transcation.invoice_date }}</td>
                <td>{{ transcation.name }}</td>
                <td>{{ transcation.type }}</td>
                
                <td>{{ transcation.phone_number }}</td>
                <td></td>
               
               
               <td>{{ transcation.total }}</td>
         
              
              
          
            
            </tr>
          {% endfor %}
          {% for payment in payment %}
            <tr>
                <td>{{ payment.id }}</td>
                <td>{{ payment.date }}</td>
                <td>{{ payment.name }}</td>
                <td>{{ payment.payment_type }}</td>
                
                <td>{{  payment.new}}</td>
                <td></td>
               
               
               <td>{{ payment.received }}</td>
         
              
              
          
            
            </tr>
          {% endfor %}

          {% for invoice in invoice %}
            <tr>
                <td>{{ invoice.id }}</td>
                <td>{{ invoice.date }}</td>
                <td>{{ invoice.name }}</td>
                <td>{{ invoice.payment_type }}</td>
                
                <td>{{  invoice.new}}</td>
                <td></td>
               
               
               <td>{{ invoice.total }}</td> 
         
              
              
          
            
            </tr>
          {% endfor %}


          {% for expense in expense %}
          <tr>
              <td>{{ expense.id }}</td>
              <td>{{ expense.invoice_date }}</td>
              <td>{{ expense.name }}</td>
              <td>{{ expense.payment_type }}</td>
              
              <td>{{  expense.new}}</td>
              <td></td>
             
             
             <td>{{ expense.total }}</td> 
       
            
            
        
          
          </tr>
        {% endfor %}

        {% for cash in cash %}
          <tr>
              <td>{{ cash.id }}</td>
              <td>{{ cash.date }}</td>
              <td>{{ cash.particulars }}</td>
              <td> Cash</td>
              <td></td>
              <td></td>
           
             
             
             <td>{{ cash.balance }}</td> 
       
            
            
        
          
          </tr>
        {% endfor %}


        {% for bank in bank %}
        <tr>
            <td>{{ bank.id }}</td>
            <td>{{ bank.date }}</td>
            <td>{{ bank.account}}</td>
            <td> {{bank.transaction_type}}</td>
            
            <td></td>
            <td></td>
           
           
           <td>{{ bank.amount }}</td> 
     
          
          
      
        
        </tr>
      {% endfor %}
        </tbody>
      </table>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script src="{% static "/css/javscript/index.js" %}"></script>
    <script>
        {% comment %} const openPopupBtn = document.getElementById("openPopupBtn");
    const popupContainer = document.getElementById("popupContainer");
    const closePopupBtn = document.getElementById("closePopupBtn");
    
    function change(){
      popupContainer.style.display = "block";
    }
    closePopupBtn.addEventListener("click", function() {
        popupContainer.style.display = "none";
    }); {% endcomment %}

    $(document).ready(function () { 
        // Listen for changes in the vehicle_model select field
        $('#vehicle_model').change(function () {
            var selectedVehicle = $(this).val();
            // Make an AJAX request to fetch the driver name for the selected vehicle
            $.ajax({
                type: 'GET',
                url: '/get_driver_name', // Replace with your actual URL
                data: { 'vehicle_model': selectedVehicle },
                success: function (data) {
                    // Update the driver_name input field with the retrieved value
                    $('#driver_name').val(data.driver_name);
                },
                error: function () {
                    // Handle errors if any
                }
            });
        });
    });
       </script> 
       
  