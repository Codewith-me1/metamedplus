{% include "layout/header.html" %}
{% include "layout/sidebar.html" %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>





    <div class="container">
        <style>

            .popupContainer8 .POP{
                width:55% !important;
            }
            .left-sidebar{
                display:flex;
            }
            /* Navbar Styles */
            .container{
                background-color: #f6f4fb !important;
              }
            .third{
                

            }
            .ipd-navbar {
              
                color: #fff;
                padding: 10px ;
                border: #b3b3b3 solid;
                border-width: 1px 0px 0px 0px;
            }
            .ipd-left{
                margin:3rem;
                padding:3rem;
                background-color:white;
                border-radius:20px;
                
                box-shadow: 19px 20px 35px -20px rgba(0,0,0,0.75);
            }
            .ipd-left h2{
                margin-top:5px;
            }
            .ipd{
                display:flex;
                
            }
            .nursenote h1,p,.doctor h1{
                text-align:left;
                padding:1rem;
            }
            .ipd table{
                width:50%;
                padding:2rem;
            }
            .ipd canvas{
                width:50%;
            }
            .ipd-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
    
            .ipd-navbar-brand {
                font-size: 24px;
                font-weight: bold;
                text-decoration: none;
                color: #fff;
            }
           
            .patient-overview table th{
                padding:1.5rem;
                font-size: 14px;
                color:#7f7d7d;
            }
            .patient-overview{
                border:solid #dfdbdb;
                border-width:1px !important;
            }
    
            .ipd-navbar-brand:hover {
                text-decoration: none;
                color: #fff;
            }
    
            .ipd-navbar-nav {
                list-style: none;
                padding: 0;
                display:flex;
                margin: 0;
            }
    
            .ipd-nav-item {
                display: inline;
                margin-right: 20px;
            }
    
            .ipd-nav-link {
                text-decoration: none;
                color: black;
    
                padding:10px ;
                padding-left:20px;
                padding-right:20px;
            }
    
            .ipd-nav-link:hover {
                text-decoration: none;
                color: #ff6600;
                background:#605BFF ;
                border: #f39c12  solid;
                border-width: 0px 0px 5px 0px;
                border-radius:10px 10px 0px 0px;
            }
            .off{
                display:none;
            }
            .toggleable {
                display: none;
                padding: 20px;
                background-color: #f5f5f5;
                border: 1px solid #ccc;
            }
        
            /* Style for the "clicked" class on the active link */
            .clicked {
                font-weight: bold;
            }
            .patient_ipd h1{
                margin:10px;
                color: #383869 !important;
                padding:3px;
                text-align:left;
            }
            .patient_ipd p{
                margin-left:11px !important;
                padding:4px !important;
                
            }
            .patient_ipd{
                border: solid #dfdbdb;
                border-width:0px 0px 1px 0px; 

            }
            td{
                padding-left:20rem;
                color:#857f7f;
            }
            .left_ipd{
                width:50%;
            }
            .right_ipd{
                width:45%;
            }
            table{
                margin-top:1rem;
            }
         
            @media only screen and (max-width:768px) and (min-width:300px) {
                .left-sidebar{
                    display:block !important;
                    width:90%;
                }
                .left_ipd{
                    width:100%;
                }
                .ipd-left{
                    width:100%;
                    margin:10px !important;
                    padding:1rem !important;
                }
                td{
                    padding-left:10rem;
                }
                .right_ipd{
                    width:100%;
                }
                #radio_billing{
                    height:100%% !important;
                }
            }
        </style>
    </head>
    <body>
        <div class="ipd-navbar">
            <div class="ipd-container">
                
                <ul class="ipd-navbar-nav">
                    <li class="ipd-nav-item"><a href="#overview" class="ipd-nav-link">Profile</a></li>  
                    <li class="ipd-nav-item"><a href="#doctor" class="ipd-nav-link">Lab Investigation</a></li>
                    
                    <!-- Add more menu items as needed -->
                </ul>
            </div>
        </div>



        <section id="overview"class="overview toggeable ">
          
            
            
            
        <div class="left-sidebar">
            <div class="left_ipd">
            <div class="patient-overview ipd-left">
                <div class="patient_ipd">
                    <h1>{{ipd.patient}} </h1>

                    <p> {{ipd.symptoms_title}} </p>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Gender</th>
                            <td>{{ipd.patient.gender}}</td>
                        </tr>
                        <tr>
                            <th>Age</th>    
                            <td>{{ipd.age}}</td>
                        </tr>
                        <tr>
                            <th>Guardian Name</th>
                            <td>{{ipd.patient.guardian_name}} </td>
                        </tr>
                        <tr>
                            <th>Phone</th>
                            <td>{{ipd.patient.phone}}</td>
                        </tr>
                        <tr>
                            <th>Height </th>
                            <td>{{ipd.height}}</td>
                        </tr>
                        <tr>
                            <th>weight</th>
                            <td>{{ipd.weight}}</td>
                        </tr>
                        <tr>
                            <th>Phone</th>
                            <td>{{ipd.temperature}}</td>
                        </tr>

                        <tr>
                            <th>Case ID </th>
                            <td>{{ipd.id}}</td>
                        </tr>
                        <tr>
                            <th>IPD No </th>    
                            <td>{{ipd.id}}</td>
                        </tr>
                        <tr>
                            <th>Admission Date</th>
                            <td>{{ipd.admission_date}}</td>
                        </tr>
                        <tr>
                            <th>Bed</th>
                            <td>{{ipd.bed_number}}</td>
                        </tr>

                        <tr>
                            <th>Consultant Doctor</th>
                            <td>{{ipd.consultant_doctor}}</td>
                        </tr>
                    </thead>
                    </table>
                    
            </div>
            </div>
            <div class="right_ipd">
         
            <div class="ipd-left">
                <canvas id="radio_billing" style="width:100%;max-width:600px"></canvas>
                
                
            </div>

            <div class="doctor ipd-left">
                <h2>Finding</h2>
                <li> 
                    <ul> {{ipd.findings}}</ul>
                </li>
        
            </div>
            <div class="nursenote ipd-left">
                <h1>
                    Nurse Note
                </h1>
                {% for nurse in nurse %}
                <div class="note">
                    <h1>{{nurse.nurse}}</h1>
                    
                
                      
                    
                    
                  
                    <p>{{nurse.comment}}</p>
                </div>
                {% endfor %}
            </div>
            </div>
        
            
        </div>
        </section>





<section id="doctor"class="doctor toggeable " >


    
        <div class="main-header">
            <h1 class="headline">Lab Investigation</h1>
            <div class="side-btns">
            
            
            {% comment %} <a class="btn-primary btn" href="{% url "appointmentForm" %}">Appointment Form</a> {% endcomment %}
         
        </div>    
            </div>

            


            
            <table class="table">
                <thead>
                  <tr>
                    
                    <th>Test Name </th>
                    <th>Lab</th>
                
                    <th>Date</th>
                    <th>Aprroved By</th>
                    <th>Total</th>
                   
                   
                  </tr>
                </thead>
                <tbody>
                  
                  {% for pathology in pathology %} 
                    <tr>
                        
                      <td>{{ pathology.test_name }}</td>
                      <td>Pathology</td>
                        
                      <td>{{ pathology.report_date }}</td>
                      <td>{{ pathology.referral_doctor }}</td>
                      <td>{{ pathology.total }}</td>
                      
                      
                    
                    </tr>
                  {% endfor %}
                  {% for Radiology in radiology %} 
                <tr>
                        
                      <td>{{ Radiology.test_name }}</td>
                      <td>Radiology</td>
                        
                      <td>{{ Radiology.report_date }}</td>
                      <td>{{ Radiology.referral_doctor }}</td>
                      <td>{{ Radiology.total }}</td>
                      
                      
                    
                    </tr>
                  {% endfor %}
                  
                
                </tbody>
              </table>  
            

              
            
            
              
</section>
       







<script>
    
 
    itemCounter = 0;
    function createNewItemRow() {
           
        itemCounter++;
        $('#item_counter').val(itemCounter);

        const newRow = `
        <tr class="item-row" id="itemRow${itemCounter}">
            <td>
                <select class="form-control" id="medicine_category_${itemCounter}" name="medicine_category_${itemCounter}">
                    <option value="medicine_category">Select An Item</option>
                    {% for cat in cat %}
                        <option value="{{cat.medicine_category}}" >{{cat.medicine_category}}</option>
                        <!-- Add more category options as needed -->
                    {% endfor %}
                </select>
            </td>
            
            <td>
                <select class="form-control" id="medicine_${itemCounter}" name="medicine_${itemCounter}">
                    <option value="medicine">Select A medicine</option>
                    {% for name in medicine_name %}
                        <option value="{{name.name}}" >{{name.name}}</option>
                        <!-- Add more category options as needed -->
                    {% endfor %}
                </select>
            </td>

          

            <td>
                <select class="form-control" id="dosage_${itemCounter}" name="dosage_${itemCounter}">
                    <option value="medicine">Select A medicine</option>
                    {% for dosage in dosage %}
                        <option value="{{dosage.dose}}" >{{dosage.dose}}</option>
                        <!-- Add more category options as needed -->
                    {% endfor %}
                </select>
            </td>

            <td>
                <select class="form-control" id="dose_interval_${itemCounter}" name="dose_interval_${itemCounter}">
                    <option value="dose_interval">Select A Interval</option>
                    {% for dosage in dosage %}
                        <option value="{{dosage.interval}}" >{{dosage.interval}}</option>
                       
                    {% endfor %}
                </select>
            </td>


            <td>
                <select class="form-control" id="duration_${itemCounter}" name="duration_${itemCounter}">
                    <option value="duration">Select A duration</option>
                    {% for dosage in dosage %}
                        <option value="{{dosage.duration}}" >{{dosage.duration}}</option>
                        <!-- Add more category options as needed -->
                    {% endfor %}
                </select>
            </td>

        </tr>
    `;

    // Append the new row to the table body
    $('.prep').append(newRow);
        
    }
    createNewItemRow();
    

    // Function to remove an item row
    function removeItemRow(rowNumber) {
        // Remove the specified item row
        $(`#itemRow${rowNumber}`).remove();
    }

    // Add an event listener to the "Add Item" button
    $('#addItemButton').on('click', function () {
        createNewItemRow();
    });



toggle()
    document.addEventListener('DOMContentLoaded', function () {
        const openPopupBtns = document.querySelectorAll('.openPopupBtn');
        console.log(openPopupBtns)


openPopupBtns.forEach(button => {
    button.addEventListener('click', () => {
        const popupId = button.getAttribute('data-popup');
        console.log(popupId)
        openPopup(popupId);
    });
});


function openPopup(popupId) {
    console.log(popupId)
    const popupContainer = document.querySelector('#popupContainer'+popupId);
    console.log(popupContainer)
    popupContainer.style.display = 'block';

    const closePopupBtn = popupContainer.querySelector('#closePopupBtn');
    closePopupBtn.addEventListener('click', () => {
        popupContainer.style.display = 'none';
    });
}
});


function toggle(){
    var sections = document.querySelectorAll('.toggeable')
    sections.forEach(function(section) {
        section.classList.add('off');
    });

    var selectedSection = document.querySelector('#overview');
        if (selectedSection) {
            selectedSection.classList.remove('off');
        }

}

    
   
    function toggleSection(sectionId) {
        // Hide all sections with class "toggleable"
        var sections = document.querySelectorAll('.toggeable');
        sections.forEach(function(section) {
            section.classList.add('off');
        });

        // Show the selected section
        var selectedSection = document.querySelector(sectionId);
        if (selectedSection) {
            selectedSection.classList.remove('off');
        }
    }

    // Add an event listener to each navigation link
    document.addEventListener('DOMContentLoaded', function() {
        var navLinks = document.querySelectorAll('.ipd-nav-link');
        navLinks.forEach(function(link) {
            link.addEventListener('click', function(e) {
                e.preventDefault(); // Prevent the default link behavior

                var sectionId = link.getAttribute('href');
                toggleSection(sectionId);
            });
        });
    });
    var xValues = ['credit limit'];
    var yValues = [2000];
    
    var barColors = [
    '#605bff',
      
    ];
  
    new Chart("creditlimit", {
      type: "doughnut",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        title: {
          display: true,
          text: "Credit Limit"
        }
      }
    });
    


    document.addEventListener('DOMContentLoaded', function () {
        // Sample data for the chart
        var data = {
            categories:['Radiology', 'Pathology', 'Blood', 'Ambulance'],
            series: [{
                name: 'Series 1',
                data: [5, 10, 15, 20, 25]
            }]
        };

        // Create the chart
        Highcharts.chart('radio', {
            chart: {
                type: 'line'
            },
            title: {
                text: 'Sample Chart'
            },
            xAxis: {
                categories: data.categories
            },
            yAxis: {
                title: {
                    text: 'Values'
                }
            },
            series: data.series
        });
    });
  
{% comment %}   
    label:['Radiology', 'Pathology', 'Blood', 'Ambulance']       backgroundColor: ['#', '#', '#', '#', 'gold', '#ff7d5c'],,
             
    data: [10, 20, 15, 25], {% endcomment %}
        const data = {
            labels: ['January', 'Feburary','March','April','May','June','July','August','September','October','December'],
            datasets: [
              
              {
                label: 'Radiology',
                
                data: [0,20,12,13,15],
                
                borderColor: '#ff55c4',
          
              },
              {
                label: 'Pathology',
                data: [0,12,20,12,15],
                borderColor: '#605bff',    
              },

              {
                label: 'Blood',
                data: [0,15,16,19,11],
                borderColor: '#7a5cff',    
              },
              
              {
                label: 'Ambulance',
                data: [0,15,16,19,20],
                borderColor: '#5dd871',    
              },
           
              

            ]
          };
      
        
          const config = {
            type: 'line',
            data: data,
            options: {
              responsive: true,
              plugins: {
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text: 'Chart.js Line Chart'
                }
              }
            },
          };
      
          const ctx = document.getElementById('radio_billing').getContext('2d');
      
          // Create the chart using Chart.js
          const myChart = new Chart(ctx, config);

    

        

</script>
</div>








